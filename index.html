 <!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>pigeon-weiner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <canvas id="game"></canvas>
  <script>
    // All your JavaScript code stays here for now
    // ...
  </script>
</body>
</html>

</h>
<body>
  <canvas id="game"></canvas>
  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    // Make canvas fill the screen
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    
    // Disabling image smoothing for crisp pixel art
    ctx.imageSmoothingEnabled = false;

    // -- EMBEDDED ASSETS (DATA URLS) --
    // I've embedded the images directly into the code. No need for an assets folder.
    // This is a 32x32 pixel art warrior.
    const PLAYER_IMG_SRC = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAKlJREFUWEft1sENwCAQBEGGYgwuxsA4aB5CI/gJt33So1f721l6wO9sA7bBCmwBG2AB22Ab8B3wAT5A3t3+g9I5R8+U9qZ69OADaA2wBtjAAmwBG2AB22AF2EC/AUyAVSAXCMBrB3wFfIAfEFd3A2yAAyCGuwE2wAFQk7sBJsAB0NpdgAvgAFitrsAFcACsVleAA+BAtQU4AC5UV4AD4EC1BTgALlRXgAPgQLUF+AB2A5s4a2kIuQAAAABJRU5ErkJggg==';
    
    // This is a 32x32 pixel art skeleton.
    const ENEMY_IMG_SRC = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAJpJREFUWEft1ksOgDAIBVE4h3IUN5FzuEdwHb6CQ1k2+EGfSHv6EwEW2OcsgQWwwBaQBQiwBRSgCygrgAIcwBELgAIcwBELgAIcwBELgAIcwBELgAIcwBELgAIcwBELgAIcwBELgAIcwBELgAIcwBELgAIcwBELgAIcwBELgAIcwBELgAIcwBEtgAPwDeAAbwDB/AF4gB/gA4wA22AGeAD/AAbwAz5B0wD+AE2gK3jmtgqBAAAAAElFTkSuQmCC';

    const playerImg = new Image();
    playerImg.src = PLAYER_IMG_SRC;

    const enemyImg = new Image();
    enemyImg.src = ENEMY_IMG_SRC;

    // -- GAME STATE --
    let player = {
      x: canvas.width / 2,
      y: canvas.height / 2,
      width: 32,
      height: 32,
      speed: 4
    };

    let enemies = [];
    let keys = {}; // Object to hold keyboard state for smooth movement

    // -- ENEMY CREATION --
    function createEnemy() {
      enemies.push({
        x: Math.random() < 0.5 ? 0 : canvas.width, // Spawn on left or right edge
        y: Math.random() * canvas.height,
        width: 32,
        height: 32,
        speed: 1.5
      });
    }

    // -- COLLISION DETECTION (AABB) --
    function checkCollision(rect1, rect2) {
      return (
        rect1.x < rect2.x + rect2.width &&
        rect1.x + rect1.width > rect2.x &&
        rect1.y < rect2.y + rect2.height &&
        rect1.y + rect1.height > rect2.y
      );
    }
    
    // -- PLAYER MOVEMENT --
    function updatePlayerPosition() {
        if (keys['ArrowUp'] || keys['w']) player.y -= player.speed;
        if (keys['ArrowDown'] || keys['s']) player.y += player.speed;
        if (keys['ArrowLeft'] || keys['a']) player.x -= player.speed;
        if (keys['ArrowRight'] || keys['d']) player.x += player.speed;

        // Prevent player from going off-screen
        player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
        player.y = Math.max(0, Math.min(canvas.height - player.height, player.y));
    }

    // -- GAME LOOP --
    function loop() {
      // 1. Update State
      updatePlayerPosition();

      enemies.forEach((enemy, index) => {
        // Simple AI: Move towards the player
        let dx = player.x - enemy.x;
        let dy = player.y - enemy.y;
        let dist = Math.sqrt(dx * dx + dy * dy);
        
        if (dist > 0) { // Avoid division by zero
          enemy.x += (dx / dist) * enemy.speed;
          enemy.y += (dy / dist) * enemy.speed;
        }

        // Check for collision
        if (checkCollision(player, enemy)) {
          console.log("HIT! Player takes damage.");
          // Reset player and enemy for now
          player.x = canvas.width / 2;
          player.y = canvas.height / 2;
          enemies.splice(index, 1); // Remove the enemy
          createEnemy(); // Spawn a new one
        }
      });

      // 2. Draw everything
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      ctx.drawImage(playerImg, player.x, player.y, player.width, player.height);
      enemies.forEach(enemy => {
        ctx.drawImage(enemyImg, enemy.x, enemy.y, enemy.width, enemy.height);
      });

      requestAnimationFrame(loop);
    }

    // -- EVENT LISTENERS for smooth movement --
    document.addEventListener("keydown", e => { keys[e.key.toLowerCase()] = true; });
    document.addEventListener("keyup", e => { keys[e.key.toLowerCase()] = false; });
    
    // -- START GAME --
    // We don't need an onload handler because Data URLs load instantly.
    console.log("Assets are embedded. Starting game.");
    createEnemy(); // Spawn one enemy at the start
    loop();

  </script>
</body>
</h>
